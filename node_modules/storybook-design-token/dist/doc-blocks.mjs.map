{"version":3,"sources":["../src/components/DesignTokenDocBlock.tsx","../src/hooks/useTokenSearch.ts","../src/hooks/useDebounce.ts","../src/hooks/useTokenTabs.ts","../src/components/SearchField.tsx","../src/components/Input.tsx","../src/components/TokenCards.tsx","../src/components/ClipboardButton.tsx","../src/components/TokenPreview.tsx","../src/components/presenter/AnimationPresenter.tsx","../src/components/presenter/BorderPresenter.tsx","../src/components/presenter/BorderRadiusPresenter.tsx","../src/components/presenter/ColorPresenter.tsx","../src/components/presenter/EasingPresenter.tsx","../src/components/presenter/EmptyPresenter.tsx","../src/components/presenter/FontFamilyPresenter.tsx","../src/components/presenter/FontSizePresenter.tsx","../src/components/presenter/FontWeightPresenter.tsx","../src/components/presenter/LineHeightPresenter.tsx","../src/components/presenter/LetterSpacingPresenter.tsx","../src/components/presenter/OpacityPresenter.tsx","../src/components/presenter/ShadowPresenter.tsx","../src/components/presenter/SpacingPresenter.tsx","../src/components/presenter/SvgPresenter.tsx","../src/components/presenter/ImagePresenter.tsx","../src/components/TokenValue.tsx","../src/components/ToolButton.tsx","../src/hooks/useFilteredTokens.ts","../src/components/Popup.tsx","../src/hooks/usePopup.ts","../src/components/TokenTable.tsx"],"names":["React","useMemo","styled","useState","useEffect","useDebounce","value","delay","debouncedValue","setDebouncedValue","handler","useTokenSearch","categories","searchText","setSearchText","debouncedSearchText","item","token","useLocalStorage","useTokenTabs","config","tokenFiles","setTokenFiles","cssCategories","setCssCategories","lessCategories","setLessCategories","scssCategories","setScssCategories","svgIconCategories","setSvgIconCategories","imageCategories","setImageIconCategories","activeCategory","setActiveCategory","cardView","setCardView","styleInjections","setStyleInjections","tabs","category","name","tab","fetchTokenFiles","designTokenSource","cssTokens","lessTokens","scssTokens","svgTokens","imageTokens","current","useCallback","SearchIcon","CrossIcon","Input","theme","SearchHolder","StyledSearchIcon","ClearButton","SearchInput","SearchField","onChange","style","handleChange","e","handleClear","useRef","CopyIcon","InfoIcon","Button","TooltipMessage","TooltipNote","WithTooltip","createPortal","useCopyToClipboard","ClipboardButton","button","_","setCopied","AnimationPresenter","Animation","BorderPresenter","Box","BorderRadiusPresenter","Container","ColorPresenter","Color","keyframes","EasingPresenter","animation","EmptyPresenter","FontFamilyPresenter","FontSizePresenter","FontWeightPresenter","LineHeightPresenter","LetterSpacingPresenter","OpacityPresenter","Circle","ShadowPresenter","SpacingPresenter","SvgPresenter","ImagePresenter","Img","TokenPreview","presenters","presenter","all","PresenterMap","PresenterComponent","CloseIcon","ToolButton","children","onClick","TokenValue","onValueChange","readonly","rawValue","setRawValue","ResetButton","RawValue","showRawValue","tokenElement","event","newRawValue","useFilteredTokens","filterNames","allTokens","themeFilteredTokens","index","self","t","transparentize","fadeIn","Popup","useLayoutEffect","usePopup","usageMap","getElementRef","getTokenName","popup","setPopup","timeoutRef","popupRef","handleContextMenu","tokenName","element","rect","top","left","closePopup","handleClick","handleScroll","target","TokenCards","padded","showValueColumn","pageSize","tokenValueOverwrites","setTokenValueOverwrites","page","setPage","cardRefs","Card","TokenName","Pagination","tokens","pages","el","newValue","usage","useVirtualizer","TokenTable","maxHeight","panelHeight","setPanelHeight","rowRefs","parentRef","theadRef","rowVirtualizer","ScrollContainer","Table","container","resizeHandler","vpHeight","tableTop","height","resizeObserver","virtualRow","DesignTokenDocBlock","categoryName","viewType","showSearch","DesignTokenDocBlockView","categoriesProp"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { useTokenSearch } from \"../hooks/useTokenSearch\";\nimport { useTokenTabs } from \"../hooks/useTokenTabs\";\nimport { Category } from \"../types/category.types\";\nimport { SearchField } from \"./SearchField\";\nimport { TokenCards } from \"./TokenCards\";\nimport { TokenTable } from \"./TokenTable\";\nimport type { TokenViewType } from \"./TokenTab\";\nimport { PresenterMapType } from \"./TokenPreview\";\n\nexport interface DesignTokenDocBlockProps {\n  categoryName: string;\n  maxHeight?: number;\n  showValueColumn?: boolean;\n  viewType: TokenViewType;\n  filterNames?: string[];\n  usageMap?: Record<string, string[]>;\n  theme?: string;\n  /**\n   * @default true\n   */\n  showSearch?: boolean;\n  pageSize?: number;\n  presenters?: PresenterMapType;\n}\n\nconst Container = styled.div(({}) => ({\n  margin: \"25px 0 40px\",\n\n  \"*\": {\n    boxSizing: \"border-box\" as const,\n  },\n}));\n\nconst Card = styled.div(() => ({\n  boxShadow:\n    \"rgb(0 0 0 / 10%) 0px 1px 3px 1px, rgb(0 0 0 / 7%) 0px 0px 0px 1px\",\n  borderRadius: 4,\n}));\n\nexport const DesignTokenDocBlock = ({\n  filterNames,\n  usageMap,\n  categoryName,\n  maxHeight = 600,\n  showValueColumn = true,\n  viewType = \"table\",\n  showSearch = true,\n  pageSize,\n  presenters,\n  theme,\n}: DesignTokenDocBlockProps) => {\n  const { tabs } = useTokenTabs({ pageSize, showSearch, presenters });\n\n  const tab = useMemo(\n    () => tabs.find((t) => t.label === categoryName),\n    [categoryName, tabs]\n  );\n\n  if (!tab) {\n    return null;\n  }\n\n  return (\n    <DesignTokenDocBlockView\n      filterNames={filterNames}\n      usageMap={usageMap}\n      categories={tab.categories}\n      viewType={viewType}\n      maxHeight={maxHeight}\n      showValueColumn={showValueColumn}\n      showSearch={showSearch}\n      pageSize={pageSize}\n      presenters={presenters}\n      theme={theme}\n    />\n  );\n};\n\ninterface DesignTokenDocBlockViewProps\n  extends Omit<DesignTokenDocBlockProps, \"categoryName\"> {\n  categories: Category[];\n}\n/**\n * NOTE: Every searchText change causes full page mount/unmount, so input loses focus after input of every next character.\n * So the aim of DesignTokenDocBlockView component prevent re-renders, as it contains searchText change inside.\n */\nfunction DesignTokenDocBlockView({\n  viewType,\n  categories: categoriesProp,\n  maxHeight,\n  showValueColumn,\n  showSearch,\n  pageSize,\n  presenters,\n  filterNames,\n  usageMap,\n  theme,\n}: DesignTokenDocBlockViewProps) {\n  const { searchText, setSearchText, categories } = useTokenSearch(\n    categoriesProp ?? []\n  );\n\n  return (\n    <Container className=\"design-token-container\">\n      {showSearch && (\n        <SearchField\n          value={searchText}\n          onChange={(value) => {\n            setSearchText(value);\n          }}\n          style={{ margin: \"12px 0\" }}\n        />\n      )}\n      {viewType === \"table\" && (\n        <Card className=\"design-token-card\">\n          <TokenTable\n            categories={categories}\n            maxHeight={maxHeight}\n            readonly\n            showValueColumn={showValueColumn}\n            presenters={presenters}\n            filterNames={filterNames}\n            usageMap={usageMap}\n            theme={theme}\n          />\n        </Card>\n      )}\n      {viewType === \"card\" && (\n        <TokenCards\n          filterNames={filterNames}\n          usageMap={usageMap}\n          categories={categories}\n          padded={false}\n          readonly\n          showValueColumn={showValueColumn}\n          pageSize={pageSize}\n          presenters={presenters}\n          theme={theme}\n        />\n      )}\n    </Container>\n  );\n}\n","import { useMemo, useState } from \"react\";\nimport { Category } from \"../types/category.types\";\nimport { useDebounce } from \"./useDebounce\";\n\nexport function useTokenSearch(categories: Category[]) {\n  const [searchText, setSearchText] = useState(\"\");\n  const debouncedSearchText = useDebounce(searchText, 250);\n  const resultCategories = useMemo(() => {\n    return debouncedSearchText\n      ? categories?.map((item) => ({\n          ...item,\n          tokens: item.tokens.filter((token) =>\n            token.name.includes(debouncedSearchText)\n          ),\n        }))\n      : categories;\n  }, [debouncedSearchText, categories]);\n\n  return {\n    categories: resultCategories,\n    searchText,\n    setSearchText,\n  };\n}\n","import { useEffect, useState } from \"react\";\n\nexport function useDebounce<T>(value: T, delay: number) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n  return debouncedValue;\n}\n","import { useEffect, useMemo, useState } from \"react\";\nimport { useLocalStorage } from \"@uidotdev/usehooks\";\n\nimport { Category } from \"../types/category.types\";\nimport { Config } from \"../types/config.types\";\n\nexport function useTokenTabs(config?: Config) {\n  const [tokenFiles, setTokenFiles] = useState<{\n    [type: string]: { categories: Category[]; injectionStyles: string };\n  }>();\n\n  const [cssCategories, setCssCategories] = useState<Category[]>([]);\n  const [lessCategories, setLessCategories] = useState<Category[]>([]);\n  const [scssCategories, setScssCategories] = useState<Category[]>([]);\n  const [svgIconCategories, setSvgIconCategories] = useState<Category[]>([]);\n  const [imageCategories, setImageIconCategories] = useState<Category[]>([]);\n\n  const [activeCategory, setActiveCategory] = useState<string>();\n  const [cardView, setCardView] = useLocalStorage(\n    \"storybook-design-token-addon-card\",\n    false\n  );\n\n  const [styleInjections, setStyleInjections] = useState(\"\");\n\n  const tabs = useMemo(() => {\n    const categories = [\n      ...cssCategories,\n      ...lessCategories,\n      ...scssCategories,\n      ...svgIconCategories,\n      ...imageCategories,\n    ].filter(\n      (category) => category !== undefined && category?.tokens.length > 0\n    );\n\n    const categoryNames = Array.from(\n      new Set(categories.map((category) => category?.name))\n    );\n\n    let tabs = categoryNames.map((name) => ({\n      label: name,\n      categories: categories.filter(\n        (category) => category?.name === name\n      ) as Category[],\n    }));\n\n    if ((config?.tabs ?? []).length !== 0) {\n      tabs = tabs.filter((tab) => config.tabs.includes(tab.label));\n    }\n\n    return tabs;\n  }, [\n    cssCategories,\n    lessCategories,\n    scssCategories,\n    svgIconCategories,\n    imageCategories,\n    config,\n  ]);\n\n  useEffect(() => {\n    async function fetchTokenFiles() {\n      const designTokenSource = await (\n        await fetch(\"./design-tokens.source.json\")\n      ).text();\n\n      setTokenFiles(JSON.parse(designTokenSource));\n    }\n\n    fetchTokenFiles();\n  }, []);\n\n  useEffect(() => {\n    const cssTokens = tokenFiles?.cssTokens;\n    const lessTokens = tokenFiles?.lessTokens;\n    const scssTokens = tokenFiles?.scssTokens;\n    const svgTokens = tokenFiles?.svgTokens;\n    const imageTokens = tokenFiles?.imageTokens;\n\n    setStyleInjections(config?.styleInjection || \"\");\n\n    if (cssTokens) {\n      setCssCategories(cssTokens.categories);\n      setStyleInjections((current) => current + cssTokens.injectionStyles);\n    }\n\n    if (lessTokens) {\n      setLessCategories(lessTokens.categories);\n      setStyleInjections((current) => current + lessTokens.injectionStyles);\n    }\n\n    if (scssTokens) {\n      setScssCategories(scssTokens.categories);\n      setStyleInjections((current) => current + scssTokens.injectionStyles);\n    }\n\n    if (svgTokens) {\n      setSvgIconCategories(svgTokens.categories);\n    }\n\n    if (imageTokens) {\n      setImageIconCategories(imageTokens.categories);\n    }\n  }, [config, tokenFiles]);\n\n  useEffect(() => {\n    if (\n      config?.defaultTab &&\n      tabs.find((item) => item.label === config.defaultTab)\n    ) {\n      setActiveCategory(config.defaultTab);\n    } else if (tabs.length > 0) {\n      setActiveCategory(tabs[0].label);\n    }\n  }, [config, tabs]);\n\n  return {\n    activeCategory,\n    cardView,\n    setActiveCategory,\n    setCardView,\n    styleInjections,\n    tabs,\n  };\n}\n","import React from \"react\";\nimport { useCallback } from \"react\";\nimport { SearchIcon, CrossIcon } from \"@storybook/icons\";\nimport { styled } from \"storybook/theming\";\nimport { Input } from \"./Input\";\n\nconst SearchHolder = styled.div(({ theme }) => ({\n  display: \"flex\",\n  flexDirection: \"column\",\n  position: \"relative\",\n  \"&:focus-within svg\": {\n    color: theme.color.defaultText,\n  },\n}));\n\nconst StyledSearchIcon = styled(SearchIcon)(({ theme }) => ({\n  width: 12,\n  height: 12,\n  position: \"absolute\",\n  top: 10,\n  left: 10,\n  zIndex: 1,\n  pointerEvents: \"none\",\n  color: theme.textMutedColor,\n}));\n\nconst ClearButton = styled.button(({ theme }) => ({\n  width: 16,\n  height: 16,\n  padding: 4,\n  position: \"absolute\",\n  top: 8,\n  right: 8,\n  zIndex: 1,\n  background: \"rgba(0,0,0,0.1)\",\n  border: \"none\",\n  borderRadius: 16,\n  color: theme.color.defaultText,\n  cursor: \"pointer\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n}));\n\nconst SearchInput = styled(Input)(({ theme }) => ({\n  paddingLeft: 28,\n  paddingRight: 28,\n  height: 32,\n}));\n\ninterface SearchFieldProps {\n  style?: React.CSSProperties;\n  value: string;\n  onChange: (value: string) => void;\n}\n\nexport function SearchField({ value, onChange, style }: SearchFieldProps) {\n  const handleChange: React.ChangeEventHandler<HTMLInputElement> = useCallback(\n    (e) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n\n  const handleClear = useCallback(() => {\n    onChange(\"\");\n  }, [onChange]);\n\n  return (\n    <SearchHolder className=\"token-search\" style={style}>\n      <StyledSearchIcon />\n      <SearchInput\n        value={value}\n        onChange={handleChange}\n        placeholder=\"Provide a token name …\"\n      />\n      <ClearButton onClick={handleClear}>\n        <CrossIcon />\n      </ClearButton>\n    </SearchHolder>\n  );\n}\n","import { styled } from \"storybook/theming\";\n\nexport const Input = styled.input(({ theme }) => ({\n  appearance: \"none\",\n  background: theme.input.background,\n  border: \"0 none\",\n  borderRadius: theme.input.borderRadius,\n  boxShadow: `${theme.input.border} 0 0 0 1px inset`,\n  boxSizing: \"inherit\",\n  color: theme.input.color || \"inherit\",\n  display: \" block\",\n  fontSize: theme.typography.size.s2 - 1,\n  lineHeight: \"20px\",\n  margin: \" 0\",\n  padding: \"6px 10px\",\n  position: \"relative\",\n  transition: \"all 200ms ease-out\",\n  width: \"100%\",\n\n  \"&:focus\": {\n    boxShadow: `${theme.color.secondary} 0 0 0 1px inset`,\n    outline: \"none\",\n  },\n  \"&[disabled]\": {\n    cursor: \"not-allowed\",\n    opacity: 0.5,\n  },\n\n  \"&:-webkit-autofill\": {\n    WebkitBoxShadow: `0 0 0 3em ${theme.color.lightest} inset`,\n  },\n\n  \"::placeholder\": {\n    color: theme.color.mediumdark,\n  },\n}));\n","import React from \"react\";\nimport { useMemo, useState, useRef } from \"react\";\nimport { CopyIcon, InfoIcon } from \"@storybook/icons\";\nimport {\n  Button,\n  TooltipMessage,\n  TooltipNote,\n  WithTooltip,\n} from \"storybook/internal/components\";\nimport { styled } from \"storybook/theming\";\nimport { createPortal } from \"react-dom\";\n\nimport { Category } from \"../types/category.types\";\nimport { ClipboardButton } from \"./ClipboardButton\";\nimport { PresenterMapType, TokenPreview } from \"./TokenPreview\";\nimport { TokenValue } from \"./TokenValue\";\nimport { ToolButton } from \"./ToolButton\";\nimport { useFilteredTokens } from \"../hooks/useFilteredTokens\";\nimport { Popup } from \"./Popup\";\nimport { usePopup } from \"../hooks/usePopup\";\nimport { Token } from \"../types/token.types\";\n\ninterface TokenCardsProps {\n  categories: Category[];\n  padded?: boolean;\n  readonly?: boolean;\n  showValueColumn?: boolean;\n  pageSize?: number;\n  presenters?: PresenterMapType;\n  filterNames?: string[];\n  usageMap?: Record<string, string[]>;\n  theme?: string;\n}\n\nexport const TokenCards = ({\n  categories,\n  padded = true,\n  readonly,\n  showValueColumn = true,\n  pageSize = 50,\n  presenters,\n  filterNames,\n  usageMap,\n  theme,\n}: TokenCardsProps) => {\n  const [tokenValueOverwrites, setTokenValueOverwrites] = useState<{\n    [tokenName: string]: any;\n  }>({});\n  const [page, setPage] = useState(0);\n  const cardRefs = useRef<Map<string, HTMLDivElement>>(new Map());\n\n  const { popup, popupRef, handleContextMenu } = usePopup({\n    usageMap,\n    getElementRef: (token: Token) => cardRefs.current.get(token.name) || null,\n    getTokenName: (token: Token) => token.name,\n  });\n\n  const Container = useMemo(\n    () =>\n      styled.div(() => ({\n        display: \"grid\",\n        columnGap: 12,\n        gridTemplateColumns: \"repeat(auto-fit, minmax(240px, 1fr))\",\n        padding: padded ? 15 : undefined,\n        rowGap: 12,\n      })),\n    []\n  );\n\n  const Card = useMemo(\n    () =>\n      styled.div(({ theme }) => ({\n        boxShadow:\n          \"rgb(0 0 0 / 10%) 0px 1px 3px 1px, rgb(0 0 0 / 7%) 0px 0px 0px 1px\",\n        borderRadius: 4,\n        color: theme.color.defaultText,\n        fontFamily: theme.typography.fonts.base,\n        fontSize: theme.typography.size.s1,\n        padding: 12,\n        overflow: \"hidden\",\n\n        \":hover\": {\n          backgroundColor: theme.background.hoverable,\n        },\n\n        \"> *:not(:last-child)\": {\n          marginBottom: 8,\n        },\n\n        svg: {\n          maxWidth: \"100%\",\n          maxHeight: \"100%\",\n        },\n      })),\n    []\n  );\n\n  const TokenName = styled.span(({ theme }) => ({\n    fontFamily: theme.typography.fonts.mono,\n    fontWeight: theme.typography.weight.bold,\n    fontSize: theme.typography.size.s1,\n  }));\n\n  const Pagination = useMemo(\n    () =>\n      styled.div(({ theme }) => ({\n        alignItems: \"center\",\n        color: theme.color.defaultText,\n        display: \"flex\",\n        fontFamily: theme.typography.fonts.base,\n        fontSize: theme.typography.size.s1,\n        justifyContent: \"space-between\",\n        paddingRight: padded ? 15 : undefined,\n        paddingBottom: padded ? 48 : undefined,\n        paddingLeft: padded ? 15 : undefined,\n        marginTop: 8,\n\n        \"& > div\": {\n          display: \"flex\",\n          gap: 8,\n        },\n      })),\n    []\n  );\n\n  const tokens = useFilteredTokens(categories, filterNames, theme);\n\n  const pages = useMemo(() => Math.ceil(tokens.length / pageSize), [tokens]);\n\n  return (\n    <>\n      <Container>\n        {tokens\n          .slice(page * pageSize, page * pageSize + pageSize)\n          .map((token, index) => (\n            <Card\n              key={token.name + \"-card-\" + index}\n              ref={(el: HTMLDivElement) => {\n                if (el) cardRefs.current.set(token.name, el);\n              }}\n              onContextMenu={(e: React.MouseEvent<Element, MouseEvent>) =>\n                handleContextMenu(e, token)\n              }\n            >\n              <div>\n                <TokenName>{token.name}</TokenName>\n\n                <WithTooltip\n                  hasChrome={false}\n                  tooltip={<TooltipNote note=\"Copy to clipboard\" />}\n                >\n                  <ClipboardButton\n                    button={\n                      <ToolButton>\n                        <CopyIcon />\n                      </ToolButton>\n                    }\n                    value={token.name}\n                  />\n                </WithTooltip>\n\n                {token.description && (\n                  <WithTooltip\n                    tooltip={<TooltipMessage desc={token.description} />}\n                  >\n                    <ToolButton>\n                      <InfoIcon />\n                    </ToolButton>\n                  </WithTooltip>\n                )}\n              </div>\n\n              {showValueColumn && (\n                <TokenValue\n                  onValueChange={(newValue) => {\n                    setTokenValueOverwrites((tokenValueOverwrites) => ({\n                      ...tokenValueOverwrites,\n                      [token.name]:\n                        newValue === token.rawValue ? undefined : newValue,\n                    }));\n                  }}\n                  readonly={readonly}\n                  token={token}\n                />\n              )}\n\n              <TokenPreview\n                presenters={presenters}\n                token={{\n                  ...token,\n                  value: tokenValueOverwrites[token.name] || token.value,\n                }}\n              />\n            </Card>\n          ))}\n      </Container>\n\n      {pages > 1 && (\n        <Pagination>\n          <span>\n            Page {page + 1} of {pages}\n          </span>\n          <div>\n            <Button\n              disabled={page === 0}\n              onClick={() => setPage((page) => Math.max(0, page - 1))}\n              tertiary\n              small\n            >\n              Previous page\n            </Button>\n            <Button\n              disabled={page >= pages - 1}\n              onClick={() => setPage((page) => Math.min(page + 1, pages - 1))}\n              tertiary\n              small\n            >\n              Next page\n            </Button>\n          </div>\n        </Pagination>\n      )}\n\n      {popup &&\n        usageMap &&\n        createPortal(\n          <Popup ref={popupRef} style={{ top: popup.top, left: popup.left }}>\n            {usageMap && usageMap[popup.tokenName] ? (\n              <>\n                <div>Used in:</div>\n                <ul>\n                  {usageMap[popup.tokenName].map((usage, index) => (\n                    <li key={index}>{usage}</li>\n                  ))}\n                </ul>\n              </>\n            ) : (\n              <div>Token might be unused or global, please check</div>\n            )}\n          </Popup>,\n          document.body\n        )}\n    </>\n  );\n};\n","import React from \"react\";\nimport { ReactNode } from \"react\";\nimport { useCopyToClipboard } from \"@uidotdev/usehooks\";\n\ninterface ClipboardButtonProps {\n  button: ReactNode;\n  value: string;\n}\n\nexport const ClipboardButton = ({ button, value }: ClipboardButtonProps) => {\n  const [_, setCopied] = useCopyToClipboard();\n\n  return <span onClick={() => setCopied(value)}>{button}</span>;\n};\n","import React from \"react\";\nimport { PresenterProps, Token, TokenPresenter } from \"../types/token.types\";\nimport { AnimationPresenter } from \"./presenter/AnimationPresenter\";\nimport { BorderPresenter } from \"./presenter/BorderPresenter\";\nimport { BorderRadiusPresenter } from \"./presenter/BorderRadiusPresenter\";\nimport { ColorPresenter } from \"./presenter/ColorPresenter\";\nimport { EasingPresenter } from \"./presenter/EasingPresenter\";\nimport { EmptyPresenter } from \"./presenter/EmptyPresenter\";\nimport { FontFamilyPresenter } from \"./presenter/FontFamilyPresenter\";\nimport { FontSizePresenter } from \"./presenter/FontSizePresenter\";\nimport { FontWeightPresenter } from \"./presenter/FontWeightPresenter\";\nimport { LineHeightPresenter } from \"./presenter/LineHeightPresenter\";\nimport { LetterSpacingPresenter } from \"./presenter/LetterSpacingPresenter\";\nimport { OpacityPresenter } from \"./presenter/OpacityPresenter\";\nimport { ShadowPresenter } from \"./presenter/ShadowPresenter\";\nimport { SpacingPresenter } from \"./presenter/SpacingPresenter\";\nimport { SvgPresenter } from \"./presenter/SvgPresenter\";\nimport { ImagePresenter } from \"./presenter/ImagePresenter\";\n\ninterface TokenPreviewProps {\n  token: Token;\n  presenters?: PresenterMapType;\n}\n\nexport const TokenPreview = ({ token, presenters }: TokenPreviewProps) => {\n  const presenter = token.presenter;\n\n  const all = { ...PresenterMap, ...(presenters || {}) };\n\n  const PresenterComponent =\n    presenter != null ? all[presenter] : EmptyPresenter;\n\n  return <PresenterComponent token={token} />;\n};\n\nexport interface PresenterMapType {\n  [key: string]:\n    | React.FunctionComponent<PresenterProps>\n    | React.ComponentClass<PresenterProps>;\n}\n\nconst PresenterMap: PresenterMapType = {\n  [`${TokenPresenter.ANIMATION}`]: AnimationPresenter,\n  [`${TokenPresenter.BORDER}`]: BorderPresenter,\n  [`${TokenPresenter.BORDER_RADIUS}`]: BorderRadiusPresenter,\n  [`${TokenPresenter.COLOR}`]: ColorPresenter,\n  [`${TokenPresenter.EASING}`]: EasingPresenter,\n  [`${TokenPresenter.FONT_FAMILY}`]: FontFamilyPresenter,\n  [`${TokenPresenter.FONT_SIZE}`]: FontSizePresenter,\n  [`${TokenPresenter.FONT_WEIGHT}`]: FontWeightPresenter,\n  [`${TokenPresenter.LINE_HEIGHT}`]: LineHeightPresenter,\n  [`${TokenPresenter.LETTER_SPACING}`]: LetterSpacingPresenter,\n  [`${TokenPresenter.OPACITY}`]: OpacityPresenter,\n  [`${TokenPresenter.SHADOW}`]: ShadowPresenter,\n  [`${TokenPresenter.SPACING}`]: SpacingPresenter,\n  [`${TokenPresenter.SVG}`]: SvgPresenter,\n  [`${TokenPresenter.IMAGE}`]: ImagePresenter,\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const AnimationPresenter = ({ token }: PresenterProps) => {\n  const Animation = useMemo(\n    () =>\n      styled.div(({ theme }) => ({\n        background: theme.color.secondary,\n        borderRadius: 2,\n        height: 32,\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return (\n    <div style={{ overflow: \"hidden\" }}>\n      <Animation style={{ animation: token.value }}></Animation>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const BorderPresenter = ({ token }: PresenterProps) => {\n  const Box = useMemo(\n    () =>\n      styled.div(() => ({\n        border: token.value,\n        height: 32,\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return <Box></Box>;\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const BorderRadiusPresenter = ({ token }: PresenterProps) => {\n  const Container = useMemo(\n    () =>\n      styled.div(() => ({\n        minHeight: 32,\n        height: 32,\n        overflow: \"auto\",\n      })),\n    []\n  );\n\n  const Box = useMemo(\n    () =>\n      styled.div(({ theme }) => ({\n        background: theme.color.secondary,\n        borderRadius: token.value,\n        minHeight: `calc(${token.value} * 2)`,\n        minWidth: `calc(${token.value} * 2)`,\n        overflow: \"hidden\",\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return (\n    <Container>\n      <Box></Box>\n    </Container>\n  );\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const ColorPresenter = ({ token }: PresenterProps) => {\n  const Color = useMemo(\n    () =>\n      styled.div(() => ({\n        background: token.value,\n        borderRadius: 2,\n        height: 32,\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return <Color></Color>;\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { keyframes, styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const EasingPresenter = ({ token }: PresenterProps) => {\n  const animation = keyframes`\n    0% {\n      transform: scaleX(0);\n    }\n    50% {\n      transform: scaleX(1);\n    }\n    100% {\n      transform: scaleX(0);\n    }\n  `;\n\n  const Box = useMemo(\n    () =>\n      styled.div(({ theme }) => ({\n        animation: `${animation} 2s infinite`,\n        animationTimingFunction: token.value,\n        background: theme.color.secondary,\n        borderRadius: 2,\n        height: 32,\n        transformOrigin: \"left\",\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return <Box />;\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\n\nexport const EmptyPresenter = () => {\n  const Container = useMemo(\n    () =>\n      styled.div(({ theme }) => ({\n        alignItems: \"center\",\n        color: theme.color.mediumdark,\n        display: \"flex\",\n        height: 32,\n        width: \"100%\",\n      })),\n    []\n  );\n\n  return <Container>No preview available.</Container>;\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const FontFamilyPresenter = ({ token }: PresenterProps) => {\n  const Box = useMemo(\n    () =>\n      styled.div(() => ({\n        fontFamily: token.value,\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return <Box>Lorem ipsum</Box>;\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const FontSizePresenter = ({ token }: PresenterProps) => {\n  const Box = useMemo(\n    () =>\n      styled.div(() => ({\n        fontSize: token.value,\n        height: token.value,\n        lineHeight: 1,\n        whiteSpace: \"nowrap\",\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return <Box>Lorem ipsum</Box>;\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const FontWeightPresenter = ({ token }: PresenterProps) => {\n  const Box = useMemo(\n    () =>\n      styled.div(() => ({\n        fontWeight: token.value as \"bold\" | \"normal\" | number,\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return <Box>Lorem ipsum</Box>;\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const LineHeightPresenter = ({ token }: PresenterProps) => {\n  const Box = useMemo(\n    () =>\n      styled.div(() => ({\n        height: \"100%\",\n        lineHeight: token.value,\n        overflow: \"auto\",\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return (\n    <Box>\n      Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ipsam veniam eum\n      dicta.\n    </Box>\n  );\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const LetterSpacingPresenter = ({ token }: PresenterProps) => {\n  const Box = useMemo(\n    () =>\n      styled.div(() => ({\n        height: \"100%\",\n        letterSpacing: token.value,\n        overflow: \"auto\",\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return (\n    <Box>\n      Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ipsam veniam eum\n      dicta.\n    </Box>\n  );\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const OpacityPresenter = ({ token }: PresenterProps) => {\n  const Container = useMemo(\n    () =>\n      styled.div(() => ({\n        display: \"flex\",\n        height: \"2rem\",\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  const Circle = useMemo(\n    () =>\n      styled.div(() => ({\n        backgroundColor: \"#000\",\n        borderRadius: \"50%\",\n        height: \"2rem\",\n        opacity: token.value,\n        width: \"2rem\",\n\n        \"&:nth-of-type(2)\": {\n          transform: \"translateX(-50%)\",\n        },\n      })),\n    [token]\n  );\n\n  return (\n    <Container>\n      <Circle />\n      <Circle />\n    </Container>\n  );\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const ShadowPresenter = ({ token }: PresenterProps) => {\n  const Box = useMemo(\n    () =>\n      styled.div(({ theme }) => ({\n        background: \"#fff\",\n        boxShadow: token.value,\n        height: 32,\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return <Box></Box>;\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const SpacingPresenter = ({ token }: PresenterProps) => {\n  const Box = useMemo(\n    () =>\n      styled.div(({ theme }) => ({\n        background: theme.color.secondary,\n        borderRadius: 2,\n        height: 32,\n        width: token.value,\n      })),\n    [token]\n  );\n\n  return <Box />;\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport const SvgPresenter = ({ token }: PresenterProps) => {\n  const Box = useMemo(\n    () =>\n      styled.div(() => ({\n        alignItems: \"center\",\n        display: \"flex\",\n        height: 32,\n        width: \"100%\",\n      })),\n    [token]\n  );\n\n  return <Box dangerouslySetInnerHTML={{ __html: token.value }}></Box>;\n};\n","import React from \"react\";\nimport { useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\nimport { PresenterProps } from \"../../types/token.types\";\n\nexport function ImagePresenter({ token }: PresenterProps) {\n  const Img = useMemo(\n    () =>\n      styled.img(() => ({\n        maxHeight: 32,\n        maxWidth: \"100%\",\n        backgroundSize: \"contain\",\n      })),\n    [token]\n  );\n\n  return <Img src={`data:image/png;base64, ${token.value}`}></Img>;\n}\n","import React from \"react\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { CloseIcon } from \"@storybook/icons\";\nimport { styled } from \"storybook/theming\";\nimport { Token, TokenSourceType } from \"../types/token.types\";\nimport { Input } from \"./Input\";\nimport { ToolButton } from \"./ToolButton\";\n\ninterface TokenValueProps {\n  onValueChange: (newValue: any) => void;\n  readonly?: boolean;\n  token: Token;\n}\n\nexport const TokenValue = ({\n  onValueChange,\n  readonly,\n  token,\n}: TokenValueProps) => {\n  const [rawValue, setRawValue] = useState(token.rawValue);\n\n  const Container = useMemo(\n    () =>\n      styled.div(({}) => ({\n        position: \"relative\",\n      })),\n    []\n  );\n\n  const ResetButton = useMemo(\n    () =>\n      styled.span(({}) => ({\n        position: \"absolute\",\n        right: 8,\n        top: \"50%\",\n        transform: \"translate3d(0, -50%, 0)\",\n      })),\n    []\n  );\n\n  const RawValue = useMemo(\n    () =>\n      styled.span(({}) => ({\n        overflow: \"hidden\",\n        wordBreak: \"break-all\",\n        WebkitLineClamp: 3,\n        WebkitBoxOrient: \"vertical\",\n        display: \"-webkit-box\",\n      })),\n    []\n  );\n\n  const showRawValue =\n    token.sourceType !== TokenSourceType.CSS &&\n    token.sourceType !== TokenSourceType.SVG;\n\n  useEffect(() => {\n    const previewIframe: HTMLIFrameElement = document.querySelector(\n      \"#storybook-preview-iframe\"\n    ) as HTMLIFrameElement;\n\n    const tokenElement = previewIframe?.contentWindow?.document.documentElement;\n\n    if (tokenElement !== undefined && tokenElement !== null) {\n      if (token.rawValue !== rawValue) {\n        tokenElement.style.setProperty(token.name, rawValue);\n      } else {\n        tokenElement.style.setProperty(token.name, token.rawValue);\n      }\n    }\n  }, [rawValue]);\n\n  return (\n    <Container>\n      {showRawValue && <RawValue title={rawValue}>{rawValue}</RawValue>}\n\n      {!showRawValue && (\n        <Input\n          readOnly={readonly}\n          onChange={(event) => {\n            const newRawValue = (event.target as HTMLInputElement).value;\n\n            setRawValue(newRawValue);\n            onValueChange(newRawValue);\n          }}\n          value={rawValue}\n        />\n      )}\n\n      {!showRawValue && token.rawValue !== rawValue && (\n        <ResetButton>\n          <ToolButton\n            onClick={() => {\n              setRawValue(token.rawValue);\n              onValueChange(token.rawValue);\n            }}\n          >\n            <CloseIcon />\n          </ToolButton>\n        </ResetButton>\n      )}\n    </Container>\n  );\n};\n","import React from \"react\";\nimport { MouseEventHandler, ReactNode, useMemo } from \"react\";\nimport { styled } from \"storybook/theming\";\n\ninterface ToolButtonProps {\n  children: ReactNode | ReactNode[];\n  onClick?: MouseEventHandler<HTMLButtonElement>;\n}\n\nexport const ToolButton = ({ children, onClick }: ToolButtonProps) => {\n  const Button = useMemo(\n    () =>\n      styled.button(({ theme }) => ({\n        alignItems: \"center\",\n        backgroundColor: \"transparent\",\n        border: \"none\",\n        cursor: \"pointer\",\n        display: \"inline-flex\",\n        height: 18,\n        justifyContent: \"center\",\n        marginLeft: 4,\n        padding: 0,\n        verticalAlign: \"middle\",\n        width: 18,\n        color: theme.color.defaultText,\n\n        \"&:hover\": {\n          color: theme.color.secondary,\n        },\n\n        \"> svg\": {\n          height: 13,\n          position: \"relative\",\n          top: -1,\n          width: 13,\n        },\n      })),\n    []\n  );\n\n  return <Button onClick={onClick}>{children}</Button>;\n};\n","import { useMemo } from \"react\";\nimport { Token } from \"../types/token.types\";\nimport { Category } from \"../types/category.types\";\n\nexport const useFilteredTokens = (\n  categories: Category[],\n  filterNames?: string[],\n  theme?: string\n): Token[] => {\n  return useMemo(() => {\n    const allTokens = categories.flatMap((category) => category.tokens);\n\n    // Filter tokens by theme if passed\n    const themeFilteredTokens = theme\n      ? allTokens.filter((token) => {\n          const tokenTheme = token.sourcePath.includes(theme);\n          return tokenTheme;\n        })\n      : allTokens;\n\n    // Filter tokens by variable name\n    const nameFilteredTokens = filterNames\n      ? themeFilteredTokens.filter((token) => filterNames.includes(token.name))\n      : themeFilteredTokens;\n\n    // Make tokens unique\n    const uniqueTokens = nameFilteredTokens.filter(\n      (token, index, self) =>\n        self.findIndex((t) => t.name === token.name) === index\n    );\n\n    return uniqueTokens;\n  }, [categories, filterNames, theme]);\n};\n","import { styled, keyframes } from \"storybook/theming\";\nimport { transparentize } from \"polished\";\n\nconst fadeIn = keyframes({\n  from: {\n    opacity: 0,\n    transform: \"translateY(5px)\",\n  },\n  to: {\n    opacity: 1,\n    transform: \"translateY(0)\",\n  },\n});\n\nexport const Popup = styled.div(({ theme }) => ({\n  position: \"absolute\",\n  background: theme.background.content,\n  border: `1px solid ${theme.color.border}`,\n  borderRadius: theme.borderRadius,\n  padding: \"12px 15px\",\n  boxShadow: `0 4px 12px ${transparentize(0.85, theme.color.darker)}`,\n  color: theme.color.defaultText,\n  fontFamily: theme.typography.fonts.base,\n  fontSize: theme.typography.size.s2,\n  minWidth: 150,\n  maxWidth: 300,\n  zIndex: 1000,\n  animation: `${fadeIn} 0.2s ease-out`,\n\n  \"& > div:first-child\": {\n    fontWeight: theme.typography.weight.bold,\n    marginBottom: 8,\n    color: theme.color.darkest,\n  },\n\n  \"& > ul\": {\n    margin: 0,\n    padding: 0,\n    listStyle: \"none\",\n    maxHeight: 200,\n    overflowY: \"auto\",\n\n    \"& > li\": {\n      padding: \"4px 8px\",\n      borderRadius: theme.borderRadius / 2,\n      color: transparentize(0.1, theme.color.defaultText),\n      background: transparentize(0.95, theme.color.medium),\n      marginBottom: 4,\n      transition: \"background 0.2s ease\",\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n\n      \"&:hover\": {\n        background: transparentize(0.85, theme.color.medium),\n      },\n\n      \"&:last-child\": {\n        marginBottom: 0,\n      },\n    },\n  },\n}));\n","import { useState, useRef, useLayoutEffect, useCallback } from \"react\";\n\ninterface PopupState {\n  top: number;\n  left: number;\n  tokenName: string;\n}\n\ninterface UsePopupProps<T> {\n  usageMap?: Record<string, string[]>;\n  getElementRef: (item: T) => HTMLElement | null;\n  getTokenName: (item: T) => string;\n}\n\nexport function usePopup<T>({\n  usageMap,\n  getElementRef,\n  getTokenName,\n}: UsePopupProps<T>) {\n  const [popup, setPopup] = useState<PopupState | null>(null);\n  const timeoutRef = useRef<number | null>(null);\n  const popupRef = useRef<HTMLDivElement | null>(null);\n\n  const handleContextMenu = useCallback(\n    (event: React.MouseEvent, item: T) => {\n      const tokenName = getTokenName(item);\n      if (!usageMap) return;\n      event.preventDefault();\n\n      const element = getElementRef(item);\n      if (!element) return;\n\n      const rect = element.getBoundingClientRect();\n      const top = rect.bottom + window.scrollY + 5; // Position below the element\n      const left = rect.left + window.scrollX;\n\n      setPopup({ top, left, tokenName });\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    },\n    [usageMap, getElementRef, getTokenName]\n  );\n\n  const closePopup = useCallback(() => {\n    setPopup(null);\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\n  }, []);\n\n  useLayoutEffect(() => {\n    const handleClick = (event: MouseEvent) => {\n      if (\n        popupRef.current &&\n        !popupRef.current.contains(event.target as Node)\n      ) {\n        closePopup();\n      }\n    };\n\n    const handleScroll = (event: Event) => {\n      if (!popup) return;\n\n      const target = event.target as Node;\n      if (popupRef.current && !popupRef.current.contains(target)) {\n        if (timeoutRef.current) clearTimeout(timeoutRef.current);\n        timeoutRef.current = window.setTimeout(closePopup, 2000);\n      }\n    };\n\n    document.addEventListener(\"click\", handleClick);\n    document.addEventListener(\"scroll\", handleScroll, true);\n    return () => {\n      document.removeEventListener(\"click\", handleClick);\n      document.removeEventListener(\"scroll\", handleScroll, true);\n    };\n  }, [popup, closePopup]);\n\n  return {\n    popup,\n    popupRef,\n    handleContextMenu,\n    closePopup,\n  };\n}\n","import React from \"react\";\nimport { transparentize } from \"polished\";\nimport { useCallback, useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { useVirtualizer } from \"@tanstack/react-virtual\";\nimport { CopyIcon, InfoIcon } from \"@storybook/icons\";\nimport {\n  TooltipMessage,\n  TooltipNote,\n  WithTooltip,\n} from \"storybook/internal/components\";\nimport { styled } from \"storybook/theming\";\nimport { useFilteredTokens } from \"../hooks/useFilteredTokens\";\nimport { createPortal } from \"react-dom\";\n\nimport { Category } from \"../types/category.types\";\nimport { ClipboardButton } from \"./ClipboardButton\";\nimport { PresenterMapType, TokenPreview } from \"./TokenPreview\";\nimport { TokenValue } from \"./TokenValue\";\nimport { ToolButton } from \"./ToolButton\";\nimport { Popup } from \"./Popup\";\nimport { usePopup } from \"../hooks/usePopup\";\nimport { Token } from \"src/types/token.types\";\n\ninterface TokenTableProps {\n  categories: Category[];\n  maxHeight?: number;\n  readonly?: boolean;\n  showValueColumn?: boolean;\n  presenters?: PresenterMapType;\n  filterNames?: string[];\n  theme?: string;\n  usageMap?: Record<string, string[]>;\n}\n\nexport const TokenTable = ({\n  categories,\n  maxHeight,\n  readonly,\n  showValueColumn = true,\n  presenters,\n  filterNames,\n  theme,\n  usageMap,\n}: TokenTableProps) => {\n  const [tokenValueOverwrites, setTokenValueOverwrites] = useState<{\n    [tokenName: string]: any;\n  }>({});\n  const [panelHeight, setPanelHeight] = useState<number>(maxHeight || 100);\n  const rowRefs = useRef<Map<number, HTMLTableRowElement>>(new Map());\n\n  const { popup, popupRef, handleContextMenu } = usePopup({\n    usageMap,\n    getElementRef: (item: { token: Token; index: number }) =>\n      rowRefs.current.get(item.index) || null,\n    getTokenName: (item: { token: Token; index: number }) => item.token.name,\n  });\n\n  const parentRef = useRef<HTMLDivElement | null>(null);\n  const theadRef = useRef<HTMLTableSectionElement | null>(null);\n\n  const tokens = useFilteredTokens(categories, filterNames, theme);\n\n  const rowVirtualizer = useVirtualizer({\n    count: tokens.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: useCallback(() => 49, []),\n  });\n\n  const ScrollContainer = useMemo(\n    () =>\n      styled.div(() => ({\n        maxHeight: panelHeight ? `${panelHeight + 30}px` : \"none\",\n        overflow: \"auto\",\n        padding: \"15px\",\n      })),\n    [panelHeight]\n  );\n\n  const Table = useMemo(\n    () =>\n      styled.table(({ theme }) => ({\n        borderCollapse: \"collapse\",\n        borderSpacing: 0,\n        color: theme.color.defaultText,\n        fontFamily: theme.typography.fonts.base,\n        fontSize: theme.typography.size.s1,\n        minWidth: 700,\n        tableLayout: \"fixed\",\n        textAlign: \"left\",\n        width: \"100%\",\n\n        \"thead > tr\": {\n          display: \"flex\",\n        },\n\n        \"tbody > tr\": {\n          borderTop: `1px solid ${theme.color.mediumlight}`,\n          display: \"flex\",\n\n          \":first-of-type\": {\n            borderTopColor: theme.color.medium,\n          },\n\n          \":last-of-type\": {\n            borderBottom: `1px solid ${theme.color.mediumlight}`,\n          },\n\n          \":hover\": {\n            backgroundColor: theme.background.hoverable,\n          },\n        },\n\n        tr: {\n          \":hover\": {\n            backgroundColor: \"rgba(0,0,0, 0.1)\",\n          },\n        },\n        \"td, th\": {\n          border: \"none !important\",\n          textOverflow: \"ellipsis\",\n          verticalAlign: \"middle\",\n\n          \":nth-of-type(1)\": {\n            flexBasis: \"50%\",\n            flexGrow: 1,\n            flexShrink: 0,\n          },\n\n          \":nth-of-type(2)\": {\n            flexBasis: \"25%\",\n            flexGrow: 0,\n            flexShrink: 0,\n          },\n\n          \":nth-of-type(3)\": {\n            flexBasis: \"25%\",\n            flexGrow: 0,\n            flexShrink: 0,\n          },\n        },\n\n        th: {\n          color:\n            theme.base === \"light\"\n              ? transparentize(0.25, theme.color.defaultText)\n              : transparentize(0.45, theme.color.defaultText),\n          paddingBottom: 12,\n\n          \":not(:first-of-type)\": {\n            paddingLeft: 15,\n          },\n\n          \":not(:last-of-type)\": {\n            paddingRight: 15,\n          },\n\n          \":last-of-type\": {\n            width: 200,\n          },\n        },\n\n        td: {\n          overflow: \"hidden\",\n          paddingBottom: 8,\n          paddingTop: 8,\n          alignItems: \"center\",\n\n          \":not(:first-of-type)\": {\n            paddingLeft: 15,\n          },\n\n          \":not(:last-of-type)\": {\n            paddingRight: 15,\n          },\n\n          svg: {\n            maxWidth: \"100%\",\n            maxHeight: \"100%\",\n          },\n\n          span: {\n            alignItems: \"center\",\n            display: \"flex\",\n            height: \"100%\",\n          },\n        },\n      })),\n    []\n  );\n\n  const TokenName = styled.span(({ theme }) => ({\n    fontFamily: theme.typography.fonts.mono,\n    fontWeight: theme.typography.weight.bold,\n    fontSize: theme.typography.size.s1,\n  }));\n\n  useLayoutEffect(() => {\n    const container = document.querySelector(\"#storybook-panel-root\");\n    if (!container) {\n      return;\n    }\n\n    const resizeHandler = () => {\n      if (maxHeight !== undefined || !container) {\n        return;\n      }\n\n      const vpHeight = window.innerHeight;\n      const tableTop = parentRef.current?.getBoundingClientRect().top || 0;\n\n      const height = vpHeight - tableTop - 40;\n\n      setPanelHeight(height);\n    };\n\n    setTimeout(() => {\n      resizeHandler();\n    });\n\n    const resizeObserver = new ResizeObserver(resizeHandler);\n    resizeObserver.observe(container);\n\n    return () => resizeObserver.disconnect();\n  }, []);\n\n  return (\n    <ScrollContainer ref={parentRef}>\n      <Table\n        style={{\n          height: `${\n            rowVirtualizer.getTotalSize() +\n            (theadRef.current?.getBoundingClientRect().height || 0)\n          }px`,\n          position: \"relative\",\n        }}\n      >\n        <thead\n          className=\"docblock-argstable-head\"\n          ref={theadRef}\n          style={{ height: \"28px\" }}\n        >\n          <tr>\n            <th>Name</th>\n            {showValueColumn && <th>Value</th>}\n            <th>Preview</th>\n          </tr>\n        </thead>\n        <tbody>\n          {rowVirtualizer.getVirtualItems().map((virtualRow) => {\n            const token = tokens[virtualRow.index];\n\n            return (\n              <tr\n                key={virtualRow.index}\n                ref={(el) => {\n                  if (el) rowRefs.current.set(virtualRow.index, el);\n                }}\n                onContextMenu={(e) =>\n                  handleContextMenu(e, { token, index: virtualRow.index })\n                }\n                style={{\n                  position: \"absolute\",\n                  top: 0,\n                  left: 0,\n                  width: \"100%\",\n                  height: `${virtualRow.size}px`,\n                  transform: `translateY(${\n                    virtualRow.start +\n                    (theadRef.current?.getBoundingClientRect().height || 0)\n                  }px)`,\n                }}\n              >\n                <td>\n                  <span>\n                    <TokenName>{token.name}</TokenName>\n\n                    <WithTooltip\n                      hasChrome={false}\n                      tooltip={<TooltipNote note=\"Copy to clipboard\" />}\n                    >\n                      <ClipboardButton\n                        button={\n                          <ToolButton>\n                            <CopyIcon />\n                          </ToolButton>\n                        }\n                        value={token.name}\n                      />\n                    </WithTooltip>\n\n                    {token.description && (\n                      <WithTooltip\n                        tooltip={<TooltipMessage desc={token.description} />}\n                      >\n                        <ToolButton>\n                          <InfoIcon />\n                        </ToolButton>\n                      </WithTooltip>\n                    )}\n                  </span>\n                </td>\n                {showValueColumn && (\n                  <td>\n                    <TokenValue\n                      key={token.name}\n                      onValueChange={(newValue) => {\n                        setTokenValueOverwrites((tokenValueOverwrites) => ({\n                          ...tokenValueOverwrites,\n                          [token.name]:\n                            newValue === token.rawValue ? undefined : newValue,\n                        }));\n                      }}\n                      readonly={readonly}\n                      token={token}\n                    />\n                  </td>\n                )}\n                <td>\n                  <TokenPreview\n                    presenters={presenters}\n                    token={{\n                      ...token,\n                      value: tokenValueOverwrites[token.name] || token.value,\n                    }}\n                  />\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </Table>\n      {popup &&\n        usageMap &&\n        createPortal(\n          <Popup ref={popupRef} style={{ top: popup.top, left: popup.left }}>\n            {usageMap[popup.tokenName] ? (\n              <>\n                <div>Used in:</div>\n                <ul>\n                  {usageMap[popup.tokenName].map((usage, index) => (\n                    <li key={index}>{usage}</li>\n                  ))}\n                </ul>\n              </>\n            ) : (\n              <div>Token might be unused or global, please check</div>\n            )}\n          </Popup>,\n          document.body\n        )}\n    </ScrollContainer>\n  );\n};\n"]}